<!DOCTYPE html>
<html lang="fr">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width">
    <link href="https://www.francetvinfo.fr/skin/dist/www/css/election/histogramme-president-82ad998589.css" media="screen" rel="stylesheet" type="text/css" />
    <style type="text/css">
        html {
            margin: 0;
            padding: 0
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            position: relative
        }
    </style>

    <body style="margin:0">
        <div id="hist-5bd7187f457a1" class="histogram-president sm">
            <div class="histo-title">Chambre des représentants</div>
            <div class="info no-photo">
                <div class="numbers">
                    <div class="left-candidate"><span class="nb">105</span>
                        <div><span class="party">Démocrates</span></div>
                    </div><span class="center">218 sièges nécessaires<br>à la majorité</span><span class="center mobile">218 sièges</span>
                    <div class="right-candidate"><span class="nb right">121</span>
                        <div><span class="party">Républicains</span></div>
                    </div>
                </div>
                <div class="clear"></div>
                <div class="bar " data-tooltip="<div>435 sièges restent à pourvoir</div>"><img class="markup" src="https://www.francetvinfo.fr/skin/www/img/election/us/triangle.png">
                    <div class="piece democrat " data-percents="24.138" data-tooltip="<div>193</div>"></div>
                    <div class="piece independant" data-percents="0" data-tooltip="<div>0</div>"></div>
                    <div class="piece republican right " data-percents="27.816" data-tooltip="<div>239</div>"></div><span class="histo-tooltip"></span></div>
                <div class="clear"></div>
                <ul class="legends">
                    <li class="democrat">Démocrate</li>
                    <li class="independant">Indépendant</li>
                    <li class="republican">Républicain</li>
                </ul>
            </div>
            <div class="clear"></div>
            <div class="info no-photo sub-bar">
                <div class="numbers">
                    <div class="left-candidate"><span class="nb">193</span></div><span class="center">Chambre sortante</span><span class="center mobile">Chambre sortante</span>
                    <div class="right-candidate"><span class="nb right">236</span></div>
                </div>
                <div class="clear"></div>
                <div class="bar no-cursor">
                    <div class="piece democrat " data-percents="44.37"></div>
                    <div class="piece independant" data-percents="0"></div>
                    <div class="piece republican right " data-percents="54.25"></div>
                </div>
            </div>
        </div>
        <script>
            (function() {
                var uid = JSON.parse('"hist-5bd7187f457a1"');
                var histoBlock = document.getElementById(uid);
                var histoBar = histoBlock.querySelector('.bar');
                var defaultTooltipValue = histoBar.getAttribute('data-tooltip');
                var histoBars = histoBlock.querySelectorAll('.piece');
                var histoTooltip = histoBlock.querySelector('.histo-tooltip');
                var bindMouseMove = false;
                histoBlock.addEventListener('mouseenter', hideTooltip);
                for (var i = 0; i < histoBars.length; i++) {
                    var tooltipValue = histoBars[i].getAttribute('data-tooltip');
                    var percentsValue = histoBars[i].getAttribute('data-percents');
                    if (tooltipValue !== null && tooltipValue.length) {
                        histoBars[i].addEventListener('mouseenter', histoBarEnter);
                        histoBars[i].addEventListener('mouseleave', histoBarLeave);
                        bindMouseMove = true;
                    }(function(histoBar, percents) {
                        setTimeout(function() {
                            histoBar.style.width = percents + '%';
                        }, 1);
                    }(histoBars[i], percentsValue));
                }
                if (bindMouseMove) {
                    histoBar.addEventListener('mousemove', updateTooltipPosition);
                    histoBar.addEventListener('mouseenter', histoBarEnter);
                    histoBar.addEventListener('mouseleave', histoBarLeave);
                }

                function histoBarEnter() {
                    histoTooltip.innerHTML = this.dataset.tooltip;
                    histoTooltip.className += ' display';
                }

                function histoBarLeave(e) {
                    var isDefaultBarHover = e.relatedTarget != null && e.relatedTarget.className.indexOf('bar') > -1;
                    hideTooltip();
                    if (defaultTooltipValue !== null && defaultTooltipValue.length && isDefaultBarHover) {
                        histoTooltip.innerHTML = defaultTooltipValue;
                    }
                }

                function updateTooltipPosition(e) {
                    var coordX = getMouseX(e);
                    histoTooltip.style.left = (coordX - histoBar.offsetLeft - 15) + 'px';
                }

                function hideTooltip() {
                    histoTooltip.className = histoTooltip.className.replace(' display', '');
                }
                var getMouseX = (function() {
                    if (window.pageXOffset != undefined) {
                        return function(ev) {
                            return ev.clientX + window.pageXOffset;
                        };
                    } else return function() {
                        var ev = window.event,
                            d = document.documentElement,
                            b = document.body;
                        return ev.clientX + d.scrollLeft + b.scrollLeft;
                    }
                })();
            })();
        </script>
    </body>

</html>
